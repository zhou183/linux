ben@ubuntu:~/Desktop$ mkdir week4
ben@ubuntu:~/Desktop$ cd week4
ben@ubuntu:~/Desktop/week4$ vi ch03.h
ben@ubuntu:~/Desktop/week4$ vi week4-1.c
ben@ubuntu:~/Desktop/week4$ gcc -g week4-1.c -o week4-1
ben@ubuntu:~/Desktop/week4$ vi week4-1.c
ben@ubuntu:~/Desktop/week4$ gcc -g week4-1.c -o week4-1

ben@ubuntu:~/Desktop/week4$ ./week4-1
bash: ./week4-1: No such file or directory
ben@ubuntu:~/Desktop/week4$ vi ch03.h
ben@ubuntu:~/Desktop/week4$ vi week4-1.c
ben@ubuntu:~/Desktop/week4$ gcc -g week4-1.c -o week4-1
ben@ubuntu:~/Desktop/week4$ vi week4-1.c
ben@ubuntu:~/Desktop/week4$ gcc -g week4-1.c -o week4-1

ben@ubuntu:~/Desktop/week4$ cat week4-1.c
#include "ch03.h"
int main(int argc,char **argv)
{
	int n,from,to;
	char buf[1024];
	if(argc!=3)
	{
		printf("Usage : %s from-file to-file\n",argv[0]);
		exit(0);
	}
	if((from=open(argv[1],O_RDONLY))<0)
	{
		printf("Usage : %s from-file to-file\n",argv[1]);
		exit(1);
	}
	if((to=open(argv[2],O_WRONLY|O_CREAT|O_APPEND,0644))<0)
	{
		printf("Usage : %s from-file to-file\n",argv[2]);
		exit(1);
	}
	while ((n=read(from,buf,sizeof(buf)))>0)
		write(to,buf,n);
	close(from);
	close(to);
	return 0;
}
		
ben@ubuntu:~/Desktop/week4$ vi ch03.h
ben@ubuntu:~/Desktop/week4$ gcc -g week4-1.c -o week4-1
ben@ubuntu:~/Desktop/week4$ vi ch03.h
ben@ubuntu:~/Desktop/week4$ gcc -g week4-1.c -o week4-1
ben@ubuntu:~/Desktop/week4$ vi ch03.h
ben@ubuntu:~/Desktop/week4$ gcc -g week4-1.c -o week4-1
ben@ubuntu:~/Desktop/week4$ ./week4-1
Usage : ./week4-1 from-file to-file
ben@ubuntu:~/Desktop/week4$







ben@ubuntu:~/Desktop/week4$ vi ch03.h
ben@ubuntu:~/Desktop/week4$ vi week4-2.c
ben@ubuntu:~/Desktop/week4$ cp week4-1.c week4-2.c
ben@ubuntu:~/Desktop/week4$ vi week4-2.c
ben@ubuntu:~/Desktop/week4$ gcc -g week4-2.c -o week4-2
ben@ubuntu:~/Desktop/week4$ ./week4-2
ben@ubuntu:~/Desktop/week4$ rm file.hole
ben@ubuntu:~/Desktop/week4$ a.out
a.out: command not found
ben@ubuntu:~/Desktop/week4$ ls -l file.hole
ls: cannot access 'file.hole': No such file or directory
ben@ubuntu:~/Desktop/week4$ ./week4-2
ben@ubuntu:~/Desktop/week4$ ls -l file.hole
-rw-r--r-- 1 ben ben 50 Oct 19 17:06 file.hole
ben@ubuntu:~/Desktop/week4$ od -c file.hole
0000000   a   b   c   d   e   f   g   h   i   j  \0  \0  \0  \0  \0  \0
0000020  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0  \0
0000040  \0  \0  \0  \0  \0  \0  \0  \0   0   1   2   3   4   5   6   7
0000060   8   9
0000062
ben@ubuntu:~/Desktop/week4$ cat ch03.h week4-2.c
#include<stdio.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<unistd.h>
#include<string.h>
#include<fcntl.h>
#include<stdlib.h>
void err_exit(char *s)
{
	printf("USAGE : *s is faile!\n");
}

#include "ch03.h"
char buf1[]="abcdefghij";
char buf2[]="0123456789";
int main(void)
{
	int fd;
	if((fd =open("file.hole",O_WRONLY|O_CREAT,0644))<0)
		err_exit("CREATE error!");
	if(write(fd,buf1,10)!=10)
		err_exit("Write error!");
	if(lseek(fd,40,SEEK_SET)==-1)
		err_exit("Lseek error!");
	if(write(fd,buf2,10)!=10)
		err_exit("Write error!");
	return 0;
}

